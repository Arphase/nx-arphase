<div nz-row
     class="mb-3">
  <div nz-col
       nzSpan="24">
    <h1 class="font-weight-light h2 text-primary">Dashboard</h1>
  </div>
</div>

<div nz-row>
  <div nz-col
       nzSpan="24">
    <nz-card>
      <ng-container *ngIf="data">
        <div nz-row
             [nzGutter]="[24, 8]"
             class="mb-3">
          <div nz-col
               nzSpan="24"
               class="text-center">
            <h3>Resumen de Garantías</h3>
          </div>
        </div>

        <div nz-row
             [nzGutter]="[24, 8]"
             class="mx-0 mb-4 rounded mt-3 py-3 px-2">
          <div nz-col
               class=" px-1 my-2 filter-column">
            <ivt-date-filter class="mr-3"
                             label="Fecha"
                             [dateTypeOptions]="dateTypeOptions"
                             (filterItems)="updateDateFilter($event)">
            </ivt-date-filter>
          </div>
          <div nz-col
               class="px-1 my-2 filter-column">
            <ivt-checkbox-filter *ngIf="groupOptions?.length"
                                 class="mr-3"
                                 label="Grupos"
                                 [options]="groupOptions"
                                 (filterItems)="updateGroupsFilters($event)">
            </ivt-checkbox-filter>
          </div>
          <div nz-col
               class="px-1 my-2 filter-column">
            <ivt-checkbox-filter *ngIf="companyOptions?.length"
                                 class="mr-3"
                                 label="Compañías"
                                 [options]="companyOptions"
                                 (filterItems)="updateCompaniesFilters($event)">
            </ivt-checkbox-filter>
          </div>
          <div nz-col
               class="px-1 my-2 filter-column">
            <ivt-checkbox-filter *ngIf="userOptions?.length"
                                 class="mr-3"
                                 label="Vendedores"
                                 [options]="userOptions"
                                 (filterItems)="updateUsersFilters($event)">
            </ivt-checkbox-filter>
          </div>
        </div>

        <nz-empty *ngIf="isEmpty"
                  nzNotFoundContent="No hay datos">
        </nz-empty>

        <div *ngIf="!isEmpty"
             nz-row>
          <div nz-col
               nzMd="16"
               nzLg="24"
               class="mb-3">
            <div style="display: block;">
              <canvas baseChart
                      [data]="data"
                      [labels]="labels"
                      [chartType]="type"
                      [options]="options"
                      [legend]="legend"
                      [colors]="colors">
              </canvas>
            </div>
          </div>
          <div nz-col
               nzMd="8"
               nzLg="24">
            <div nz-row
                 class="my-3"
                 *ngFor="let item of labels; let i = index">
              <div nz-col
                   nzSpan="24">
                <h6 class="flex-start">
                  <i nz-icon
                     nzType="line"
                     nzTheme="outline"
                     lass="mr-2"
                     [style.color]="colors[0]?.backgroundColor[i]"></i>
                  {{ item }}: {{ data[i] | currency}}
                </h6>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
    </nz-card>
  </div>
</div>
