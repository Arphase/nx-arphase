<form nz-form
      nzLayout="vertical"
      [formGroup]="form"
      (ngSubmit)="submit()">
  <div nz-row>
    <div nz-col
         nzSpan="24">
      <nz-page-header nzBackIcon
                      [nzTitle]="item?.id ? 'Nuevo Producto' : 'Editar Producto'"
                      [routerLink]="['..']">
      </nz-page-header>
    </div>
  </div>

  <div class="pt-3">
    <div nz-row
         [nzGutter]="12">
      <div nz-col
           nzMd="24"
           nzLg="8">
        <nz-form-item>
          <nz-form-label nzRequired>Nombre del producto</nz-form-label>
          <nz-form-control apsAutoError>
            <input nz-input
                   formControlName="name" />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col
           nzMd="24"
           nzLg="8">
        <nz-form-item>
          <nz-form-label nzRequired>Precio</nz-form-label>
          <nz-form-control apsAutoError>
            <input nz-input
                   prefix="$ "
                   mask="0*.00"
                   formControlName="price" />
          </nz-form-control>
        </nz-form-item>
      </div>
      <div nz-col
           nzMd="24"
           nzLg="8">
        <nz-form-item>
          <nz-form-label nzRequired>Logo (.png, .jpg, .jpeg)</nz-form-label>
          <nz-form-control apsAutoError>
            <input nz-input
                   [hidden]="true"
                   formControlName="logo" />
            <nz-upload class="product-upload"
                       nzListType="picture"
                       [(nzFileList)]="fileList"
                       [nzShowButton]="!fileList.length"
                       [nzDisabled]="!!fileList.length"
                       [nzLimit]="1"
                       [nzSize]="5000"
                       [nzCustomRequest]="customRequest"
                       [nzAccept]="imageFileTypes"
                       [nzFileType]="imageFileTypes"
                       [nzShowUploadList]="showUploadList"
                       [nzPreview]="preview"
                       (nzChange)="saveFile($event)">
              <button nz-button
                      type="button">
                <i nz-icon
                   nzType="upload"></i>
                Subir archivo
              </button>
            </nz-upload>
          </nz-form-control>
        </nz-form-item>
      </div>

    </div>

    <div nz-row
         [nzGutter]="12">
      <div nz-col
           nzSpan="8"
           class="px-0 ml-auto">
        <nz-form-item>
          <nz-form-label>Glosario</nz-form-label>
          <nz-form-control>
            <nz-select formControlName="glossary"
                       [nzOptions]="glossaryOptions">
            </nz-select>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <div nz-row
         class="quill-row"
         [nzGutter]="12">
      <div nz-col
           nzSpan="24">
        <nz-form-item>
          <nz-form-label nzRequired>Plantilla</nz-form-label>
          <nz-form-control apsAutoError>
            <quill-editor format="html"
                          formControlName="template"
                          placeholder=""></quill-editor>
          </nz-form-control>
        </nz-form-item>
      </div>
    </div>

    <div nz-row
         [nzGutter]="12">
      <div nz-col
           nzSpan="24"
           class="flex-end">
        <nz-space>
          <button *nzSpaceItem
                  nz-button
                  type="button"
                  [routerLink]="['..']">Cancelar</button>
          <button *nzSpaceItem
                  nz-button
                  type="button"
                  [nzLoading]="loading$ | async"
                  (click)="downloadTemplatePreview()">Vista previa</button>
          <button *nzSpaceItem
                  nz-button
                  type="submit"
                  nzType="primary">Guardar</button>
        </nz-space>
      </div>
    </div>
  </div>
</form>
