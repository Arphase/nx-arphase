<ivt-row>
  <div class="color-status {{ backgroundClasses[item.status] }}"
       (mouseenter)="showStatusSubject.next(true)"></div>

  <div [ngClass]="{ collapsed: !(visibleStatus$ | async)}"
       class="color-status-description {{ backgroundClasses[item.status] }} text-center p-3 flex-center">
    <div class="mx-2">
      <p class="text-white mb-0">{{ statusLabels[item.status] }}</p>
    </div>
  </div>
  <div class="col-1 d-flex justify-content-center">
    <mat-checkbox [disabled]="item?.amount"
                  [checked]="isSelected"
                  (change)="selectItem.emit(item)">
    </mat-checkbox>
  </div>
  <div class="col-1">
    {{ item.id | folio }}
  </div>
  <div class="col-2">
    {{ item.vehicle?.vin }}
  </div>
  <div class="col-2">
    {{ item.startDate | date: "dd/MM/yyyy" }}
  </div>
  <div class="col-2">
    {{ item.endDate | date: "dd/MM/yyyy" }}
  </div>
  <div class="col flex-end">
    {{ item.amount | currency | empty }}
  </div>
  <div class="col flex-end">
    <button mat-icon-button
            matTooltip="Acciones"
            [loading]="loading"
            [matMenuTriggerFor]="actionsMenu">
      <mat-icon>more_vert</mat-icon>
    </button>
    <mat-menu #actionsMenu="matMenu">
      <button mat-menu-item
              [routerLink]="[item.id]">
        Editar garantía
      </button>
      <button mat-menu-item
              [matMenuTriggerFor]="statusMenu">
        Cambiar estatus
      </button>
      <button mat-menu-item
              (click)="downloadPdf.emit(item.id)">
        Descargar PDF
      </button>
      <button mat-menu-item
              *ngIf="!item.amount"
              (click)="openPaymentOrderDialog.emit([item.id])">
        Generar orden de pago
      </button>
      <button mat-menu-item
              *ngIf="item.amount"
              (click)="downloadPaymentOrder.emit(item.paymentOrderId)">
        Descargar orden de pago
      </button>
    </mat-menu>

    <mat-menu #statusMenu="matMenu">
      <button *ngFor="let menuOption of menuOptions"
              mat-menu-item
              class="status-option my-2"
              (click)="onChangeStatus(item.id, menuOption.value)">
        <span class="{{ menuOption.class }} text-white text-center rounded flex-center">
          {{ menuOption.label }}
        </span>
      </button>
    </mat-menu>
    <!-- <button mat-icon-button
            matTooltip="Editar garantía"
            [routerLink]="[item.id]">
      <mat-icon>border_color</mat-icon>
    </button>
    <button mat-icon-button
            matTooltip="Cambiar estatus"
            [matMenuTriggerFor]="menu"
            [loading]="loadingStatusChange">
      <mat-icon>published_with_changes</mat-icon>
    </button>
    <mat-menu #menu="matMenu"
              xPosition="before">
      <button *ngFor="let menuOption of menuOptions"
              mat-menu-item
              class="status-option my-2"
              (click)="onChangeStatus(item.id, menuOption.value)">
        <span class="{{ menuOption.class }} text-white text-center rounded flex-center">
          {{ menuOption.label }}
        </span>
      </button>
    </mat-menu>
    <button mat-icon-button
            matTooltip="Descargar PDF"
            [loading]="loading"
            (click)="downloadPdf.emit(item.id)">
      <mat-icon>picture_as_pdf</mat-icon>
    </button>
    <button mat-icon-button
            matTooltip="Generar orden de pago"
            [loading]="loadingPaymentOrder"
            (click)="generatePaymentOrder.emit([item.id])">
      <mat-icon>local_atm</mat-icon>
    </button> -->
  </div>
</ivt-row>
