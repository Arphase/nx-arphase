<ivt-row>
  <div class="color-status {{ backgroundClasses[item.status] }}"
       (mouseenter)="showStatusSubject.next(true)"
       (click)="showStatusSubject.next(true)"></div>

  <div [ngClass]="{ collapsed: !(visibleStatus$ | async)}"
       class="color-status-description {{ backgroundClasses[item.status] }} text-center p-3 flex-center">
    <div class="mx-2">
      <p class="text-white mb-0">{{ statusLabels[item.status] }}</p>
    </div>
  </div>
  <div nz-col
       nzSpan="2"
       class="d-flex justify-content-center">
    <label nz-checkbox
           [nzDisabled]="item?.amount"
           [(ngModel)]="isSelected"
           (ngModelChange)="selectItem.emit(item)"></label>
  </div>
  <div nz-col
       nzMd="4"
       nzLg="2">
    {{ item.id | folio }}
  </div>
  <div nz-col
       nzSpan="4"
       class="d-none d-lg-block d-xl-block">
    <ivt-text-truncate-tooltip [label]="item.vehicle?.vin"></ivt-text-truncate-tooltip>
  </div>
  <div nz-col
       nzSpan="4"
       class="d-none d-sm-block d-md-block d-lg-block d-xl-block">
    <ivt-text-truncate-tooltip [label]="item.paymentOrder?.distributor | empty"></ivt-text-truncate-tooltip>
  </div>
  <div nz-col
       nzXs="12"
       nzSm="8"
       nzLg="2">
    {{ item.startDate | date: "dd/MM/yy" }}
  </div>
  <div nz-col
       nzXs="12"
       nzSm="8"
       nzLg="2">
    {{ item.endDate | date: "dd/MM/yy" }}
  </div>
  <div nz-col
       nzMd="4"
       nzLg="2"
       class="d-none d-lg-block d-xl-block">
    {{ item.invoiceNumber | empty }}
  </div>
  <div nz-col
       nzSpan="4"
       class="d-none d-sm-block d-md-block d-lg-block d-xl-block text-right">
    <ivt-text-truncate-tooltip [label]="item.amount | currency | empty"></ivt-text-truncate-tooltip>
  </div>
  <div nz-col
       class="ml-auto pl-0">
    <button nz-button
            nz-dropdown
            [nzDropdownMenu]="menu"
            nzType="text"
            matTooltip="Acciones"
            [nzLoading]="loading"
            nzTrigger="click">
      <i nz-icon
         nzType="more"
         nzTheme="outline"></i>
    </button>

    <nz-dropdown-menu #menu="nzDropdownMenu">
      <ul nz-menu>
        <li nz-menu-item
            [routerLink]="[item.id]">
          {{ isEditable ? 'Editar' : 'Ver' }} garantía
        </li>
        <li nz-submenu
            nzTitle="Cambiar estatus">
          <ul>
            <li *ngFor="let menuOption of menuOptions"
                nz-menu-item
                class="status-option my-2"
                (click)="onChangeStatus(item.id, menuOption.value)">
              <span class="{{ menuOption.class }} text-white text-center rounded flex-center">
                {{ menuOption.label }}
              </span>
            </li>
          </ul>
        </li>
        <li nz-menu-item
            (click)="downloadPdf.emit(item.id)">
          Descargar PDF
        </li>
        <li *ngIf="!item.paymentOrderId"
            nz-menu-item
            (click)="createPaymentOrder.emit(item.id)">
          Generar orden de pago
        </li>
        <ng-container *ngIf="item.paymentOrderId">
          <li nz-menu-item
              (click)="downloadPaymentOrder.emit(item.paymentOrderId)">
            Descargar orden de pago
          </li>

          <li nz-menu-item
              (click)="updatePaymentOrder.emit(item.paymentOrderId)">
            Editar orden de pago
          </li>
        </ng-container>
        <li nz-menu-item
            (click)="editInvoiceNumber.emit(item)">
          Editar número de factura
        </li>
      </ul>
    </nz-dropdown-menu>
  </div>
</ivt-row>
