<label *ngIf="label">{{ label }}</label>

<div class="row file-drop-container"
     ng2FileDrop
     [uploader]="uploader"
     [class.file-over]="hasBaseDropZoneOver"
     [class.container-error]="showErrors && !form.valid"
     (fileOver)="fileOverBase($event)">
  <div class="col-12">
    <div class="file-drop-row">
      <div>
        <button mat-raised-button
                color="primary"
                class="btn-blue"
                [disabled]="disabled"
                (click)="input.click()">Seleccionar archivo</button>

        <input #input
               hidden
               type="file"
               ng2FileSelect
               [uploader]="uploader"
               [accept]="allowedFileExtensions" />
      </div>

      <div>
        <span class="float-right d-flex align-items-center">
          <mat-icon>save_alt</mat-icon>
          <span>Arrastra y suelta los archivos aquí</span>
        </span>
      </div>
    </div>
  </div>

  <div class="col file-queue"
       *ngIf="!disabled">
    <div class="row"
         *ngFor="let item of uploader.queue">
      <div class="col">
        <div class="file-ivt-row file-item">
          <mat-spinner class="mx-2"
                       [diameter]="38"
                       *ngIf="state === 'loading'"></mat-spinner>

          <mat-icon class="mx-2"
                    *ngIf="state === 'success' || state === 'preloaded'">check_circle</mat-icon>

          <mat-icon class="mx-2"
                    *ngIf="state === 'error'">error</mat-icon>

          <span class="file-name text-truncate"
                [title]="item?.file?.name">{{ item?.file?.name }}</span>

          <button class="file-ivt-row__action"
                  mat-icon-button
                  (click)="removeItem(item)">
            <mat-icon>delete</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div *ngIf="form.get('invalid').errors"
     class="error">
  <mat-icon>cancel</mat-icon>
  Este tipo de archivo no es permitido
</div>

<div *ngIf="form.get('fileSize').errors"
     class="error">
  <mat-icon>cancel</mat-icon>
  Solo archivos de máximo {{ maxFileSize }} MB son permitidos
</div>


<div *ngIf="showErrors && form.get('maxFiles').errors"
     class="error">
  <mat-icon>cancel</mat-icon>
  Es necesario subir mínimo {{ maxFiles }} archivo(s) en esta sección
</div>

<div *ngIf="showErrors && form.get('minFiles').errors"
     class="error">
  <mat-icon>cancel</mat-icon>
  Es necesario subir mínimo {{ minFiles }} archivo(s) en esta sección
</div>
